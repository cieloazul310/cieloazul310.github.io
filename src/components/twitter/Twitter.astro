---
import { css } from "@cieloazul310/sarkara-css/css";

interface Props {
  url: string;
}
const { url } = Astro.props;

const base = "https://publish.twitter.com/oembed";
const baseUrl = new URL(base);
baseUrl.searchParams.set("url", url);
baseUrl.searchParams.set("omit_script", "true");

const tweet = await fetch(baseUrl.toString())
  .then<{ html: string }>((res) => res.json())
  .catch(() => null);
---

{
  tweet && (
    <div
      class={css({ my: 8, _first: { mt: 0 }, _last: { mb: 0 } })}
      set:html={tweet.html}
    />
  )
}
